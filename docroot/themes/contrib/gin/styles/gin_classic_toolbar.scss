// Import breakpoint
@import "node_modules/breakpoint-sass/stylesheets/breakpoint";

@import "_vars";
@import "coffee";

// Toolbar
.toolbar {
  .toolbar-bar {
    $breakpoint: 576px;
    background: #100f10;
    box-shadow: none;

    @include mq($breakpoint) {
      // display: flex;

      // Alignment: move user account
      .user-menu {
        order: 99;
        align-self: flex-end;
        flex-grow: 1;
        text-align: right;

        .toolbar-item {
          display: inline-block;
        }

        .toolbar-menu {
          text-align: left;
        }
      }

      .contextual-toolbar-tab {
        order: 100;
      }
    }

    .contextual-toolbar-tab.toolbar-tab {
      float: right; // Set contextual to right
    }

    .toolbar-tab > .toolbar-item {
      font-weight: normal;
    }

    .toolbar-tab > .toolbar-item.is-active {
      background-image: none;
      background-color: rgba(255, 255, 255, .1);
    }

    .toolbar-tab > .toolbar-icon:before {
      @media only screen and (min-width: 36em) {
        background-size: 90% auto;
      }
    }

    .toolbar-icon.toolbar-handle,
    .toolbar-menu .toolbar-menu .toolbar-icon.toolbar-handle
    {
      &::before {
        transform: rotate(90deg);
        background-position: center center;
        background-size: 12px 12px;
      }

      &.open::before {
        transform: rotate(-90deg);
      }
    }

    // Home icon
    .toolbar-icon-admin-toolbar-tools-help {
      width: 80px;

      &:before {
        width: 45px;
        left: .75rem;
        background-image: url(../images/drupal-dark.svg);
      }
    }

    // Inline Edit toggle
    .toolbar-tab > .toolbar-icon.toolbar-icon-edit.toolbar-item,
    .toolbar-tab > .toolbar-icon.toolbar-icon-edit.toolbar-item.is-active,
    .toolbar-tab > .toolbar-icon.toolbar-icon-edit.toolbar-item:focus {
      background: var(--colorGinPrimary);
    }
  }
}

.toolbar-horizontal .toolbar-tray {
  box-shadow: none;
  border-bottom: 1px solid var(--colorGinBorder);

  a {
    color: var(--colorGinText);
    font-weight: normal;

    &:hover, &:active, &:focus, &.is-active {
      text-decoration: none;
    }
  }

  .menu-item {
    &:hover, a:focus {
      background-color: var(--colorGinLayer2Background);
    }
  }

  .menu-item + .menu-item {
    border-left: 0 none;

    &:last-child {
      border-right: 0 none;
    }
  }
}

.toolbar .toolbar-menu,
.toolbar-horizontal .toolbar-tray .menu-item--expanded,
.toolbar .toolbar-tray {
  background-color: var(--colorGinLayerBackground);
}

.toolbar-horizontal .toolbar-tray .toolbar-toggle-orientation {
  border-left: 1px solid var(--colorGinBorder);
}

.toolbar-tray a,
.toolbar .toolbar-menu .toolbar-menu a {
  color: var(--colorGinText);

  &:hover {
    color: var(--colorGinTitle);
  }
}

.toolbar .toolbar-tray .menu-item--active-trail > .toolbar-box a,
.toolbar .toolbar-tray a.is-active {
  color: var(--colorGinPrimary);
  font-weight: normal;
}

.toolbar .toolbar-tray-vertical {
  box-shadow: none;
  border-right: 1px solid var(--colorGinBorder);
  background: var(--colorGinLayerBackground);

  .toolbar-menu ul ul {
    border-top: 1px solid var(--colorGinBorder);
    border-bottom: 1px solid var(--colorGinBorder);
  }

  .menu-item + .menu-item {
    border-top: 1px solid var(--colorGinBorder);
  }

  .menu-item:last-child {
    border-bottom: 1px solid var(--colorGinBorder);
  }
}

.toolbar .toolbar-tray-horizontal {
  ul {
    li {
      &.menu-item {
        .menu-item {
          border-left: none;
          border-right: none;
          border-bottom: 1px solid var(--colorGinBorder);

          &:first-child {
            border-top: 1px solid var(--colorGinBorder);
          }
        }

        &--expanded {
          &.hover-intent ul {
            box-shadow: 0px 8px 14px rgba(0, 0, 0, 0.15);
          }
        }
      }
    }
  }
}

// Default icon settings for admin tray
.toolbar {
  .toolbar-icon-system-admin-content,
  .toolbar-icon-system-admin-structure,
  .toolbar-icon-system-themes-page,
  .toolbar-icon-system-modules-list,
  .toolbar-icon-system-admin-config,
  .toolbar-icon-entity-user-collection,
  .toolbar-icon-system-admin-reports,
  .toolbar-icon-help-main,
  .toolbar-icon-commerce-admin-commerce,
  .toolbar-tab > .toolbar-icon-edit.toolbar-item {
    &:before {
      background-color: var(--colorGinTextLight);
      background-image: none;
      mask-repeat: no-repeat;
      mask-position: center center;
      mask-size: 20px 20px;

      @include mq(976px) {
        left: 8px;
        width: 21px;
      }
    }

    &.is-active:before {
      background-image: none;
      background-color: var(--colorGinPrimary);
    }
  }

  // Admin tray: Add content
  .toolbar-icon-system-admin-content {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cg%3E%3Cpath fill='%23#{$iconFill}' d='M12.502 7h-5c-.276 0-.502-.225-.502-.5v-5c0-.275-.225-.5-.5-.5h-3c-.275 0-.5.225-.5.5v12.029c0 .275.225.5.5.5h9.002c.275 0 .5-.225.5-.5v-6.029c0-.275-.225-.5-.5-.5zM8.502 6h4c.275 0 .34-.159.146-.354l-4.293-4.292c-.195-.195-.353-.129-.353.146v4c0 .275.225.5.5.5z'/%3E%3C/g%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: Structure
  .toolbar-icon-system-admin-structure {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16px' height='16px'%3E%3Cpath fill='%23#{$iconFill}' d='M15.002,11.277c0-0.721,0-1.471,0-2.014c0-1.456-0.824-2.25-2.25-2.25c-1.428,0-3.5,0-3.5,0c-0.139,0-0.25-0.112-0.25-0.25v-2.04c0.596-0.346,1-0.984,1-1.723c0-1.104-0.895-2-2-2C6.896,1,6,1.896,6,3c0,0.738,0.405,1.376,1,1.722v2.042c0,0.138-0.112,0.25-0.25,0.25c0,0-2.138,0-3.5,0S1,7.932,1,9.266c0,0.521,0,1.277,0,2.012c-0.595,0.353-1,0.984-1,1.729c0,1.104,0.896,2,2,2s2-0.896,2-2c0-0.732-0.405-1.377-1-1.729V9.266c0-0.139,0.112-0.25,0.25-0.25h3.536C6.904,9.034,7,9.126,7,9.25v2.027C6.405,11.624,6,12.26,6,13c0,1.104,0.896,2,2.002,2c1.105,0,2-0.896,2-2c0-0.738-0.404-1.376-1-1.723V9.25c0-0.124,0.098-0.216,0.215-0.234h3.535c0.137,0,0.25,0.111,0.25,0.25v2.012c-0.596,0.353-1,0.984-1,1.729c0,1.104,0.896,2,2,2s2-0.896,2-2C16.002,12.262,15.598,11.623,15.002,11.277z'/%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: Appearance
  .toolbar-icon-system-themes-page {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath fill='%23#{$iconFill}' d='M8.184 7.928l-1.905 1.983-3.538-2.436 4.714-4.713 2.623 3.183-1.894 1.983zm-1.746-7.523c-.236-.416-.803-.649-1.346.083-.259.349-4.727 4.764-4.91 4.983-.182.218-.294.721.044.976.34.258 5.611 3.933 5.611 3.933l-.225.229c.7.729.816.854 1.046.863.75.016 2.035-1.457 2.578-.854.541.604 3.537 3.979 3.537 3.979.51.531 1.305.559 1.815.041.521-.521.541-1.311.025-1.848 0 0-2.742-2.635-3.904-3.619-.578-.479.869-2.051.854-2.839-.008-.238-.125-.361-.823-1.095l-.22.243c0 .003-3.846-4.659-4.082-5.075z'/%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: Modules
  .toolbar-icon-system-modules-list {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath fill='%23#{$iconFill}' d='M11.002 11v2.529c0 .275-.225.471-.5.471h-3c-.827 0-1.112-.754-.604-1.316l.81-.725c.509-.562.513-1.461-.097-2.01-.383-.344-1.027-.728-2.111-.728s-1.727.386-2.109.731c-.609.549-.606 1.45-.097 2.015l.808.717c.509.562.223 1.316-.602 1.316h-3c-.276 0-.5-.193-.5-.471v-9.029c0-.276.224-.5.5-.5h3c.825 0 1.111-.768.602-1.332l-.808-.73c-.51-.563-.513-1.465.097-2.014.382-.344 1.025-.731 2.109-.731s1.728.387 2.111.731c.608.548.606 1.45.097 2.014l-.81.73c-.509.564-.223 1.332.603 1.332h3c.274 0 .5.224.5.5v2.5c0 .825.642 1.111 1.233.602l.771-.808c.599-.51 1.547-.513 2.127.097.364.383.772 1.025.772 2.109s-.408 1.727-.771 2.109c-.58.604-1.529.604-2.127.097l-.77-.808c-.593-.509-1.234-.223-1.234.602z'/%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: Configuration
  .toolbar-icon-system-admin-config {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath fill='%23#{$iconFill}' d='M14.416 11.586l-.01-.008v-.001l-5.656-5.656c.15-.449.252-.921.252-1.421 0-2.485-2.016-4.5-4.502-4.5-.505 0-.981.102-1.434.255l2.431 2.431-.588 2.196-2.196.588-2.445-2.445c-.162.464-.268.956-.268 1.475 0 2.486 2.014 4.5 4.5 4.5.5 0 .972-.102 1.421-.251l5.667 5.665c.781.781 2.047.781 2.828 0s.781-2.047 0-2.828z'/%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: People
  .toolbar-icon-entity-user-collection {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cg%3E%3Cpath fill='%23#{$iconFill}' d='M6.722 11.291l.451-.17-.165-.32c-.536-1.039-.685-1.934-.761-2.672-.082-.808-.144-2.831 1.053-4.189.244-.278.493-.493.743-.675.012-.826-.135-1.766-.646-2.345-.618-.7-1.4-.787-1.4-.787l-.497-.055-.498.055s-.783.087-1.398.787c-.617.702-.717 1.948-.625 2.855.06.583.17 1.263.574 2.05.274.533.341.617.355 1.01.022.595.027 1.153-.671 1.538-.697.383-1.564.508-2.403 1.088-.596.41-.709 1.033-.78 1.459l-.051.41c-.029.273.173.498.448.498h5.012c.457-.24.89-.402 1.259-.537zM5.064 15.096c.07-.427.184-1.05.78-1.46.838-.581 1.708-.706 2.404-1.089.699-.385.693-.943.672-1.537-.014-.393-.08-.477-.354-1.01-.406-.787-.515-1.467-.576-2.049-.093-.909.008-2.155.625-2.856.615-.7 1.398-.787 1.398-.787l.492-.055h.002l.496.055s.781.087 1.396.787c.615.701.72 1.947.623 2.855-.062.583-.172 1.262-.571 2.049-.271.533-.341.617-.354 1.01-.021.595-.062 1.22.637 1.604.697.385 1.604.527 2.438 1.104.923.641.822 1.783.822 1.783-.022.275-.269.5-.542.5h-9.991c-.275 0-.477-.223-.448-.496l.051-.408z'/%3E%3C/g%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: Statistics
  .toolbar-icon-system-admin-reports {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cg%3E%3Cpath fill='%23#{$iconFill}' d='M4 13.529c0 .275-.225.5-.5.5h-3c-.275 0-.5-.225-.5-.5v-4.25c0-.274.225-.5.5-.5h3c.275 0 .5.226.5.5v4.25zM10.002 13.529c0 .275-.225.5-.5.5h-3.002c-.275 0-.5-.225-.5-.5v-13c0-.275.225-.5.5-.5h3.002c.275 0 .5.225.5.5v13zM16.002 13.529c0 .275-.225.5-.5.5h-3c-.275 0-.5-.225-.5-.5v-9.5c0-.275.225-.5.5-.5h3c.275 0 .5.225.5.5v9.5z'/%3E%3C/g%3E%3C/svg%3E%0A");
    }
  }

  // Admin tray: Help
  .toolbar-icon-help-main {
    &:before {
      mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath fill='%23#{$iconFill}' d='M8.002 1c-3.868 0-7.002 3.134-7.002 7s3.134 7 7.002 7c3.865 0 7-3.134 7-7s-3.135-7-7-7zm3 5c0 .551-.16 1.085-.477 1.586l-.158.22c-.07.093-.189.241-.361.393-.168.148-.35.299-.545.447l-.203.189-.141.129-.096.17-.021.235v.63h-2.001v-.704c.026-.396.078-.73.204-.999.125-.269.271-.498.439-.688l.225-.21-.01-.015.176-.14.137-.128c.186-.139.357-.277.516-.417l.148-.18c.098-.152.168-.323.168-.518 0-.552-.447-1-1-1s-1.002.448-1.002 1h-2c0-1.657 1.343-3 3.002-3 1.656 0 3 1.343 3 3zm-1.75 6.619c0 .344-.281.625-.625.625h-1.25c-.345 0-.626-.281-.626-.625v-1.238c0-.344.281-.625.626-.625h1.25c.344 0 .625.281.625.625v1.238z'/%3E%3C/svg%3E%0A");
    }
  }

  // Commerce
  .toolbar-icon-commerce-admin-commerce {
    &:before {
      mask-image: url("data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='32' viewBox='0 0 20 32'%3E%3Cpath d='M17 24.5c0 .8-.7 1.5-1.5 1.5s-1.5-.7-1.5-1.5v-2.5h3v2.5zm-9 0c0 .8-.7 1.5-1.5 1.5s-1.5-.7-1.5-1.5v-2.5h3v2.5zm8.1-4.5c.7 0 1.4-.5 1.6-1.3l1.5-5.7c.1-.6-.3-2-1.2-2h-1c-.3-2-2-4-4.5-5-.8-.3-1.4-1.2-1.9-2-.3 1.2-.1 1.8-1.9 2.6-1.7.8-2.9 2.4-3.2 4.4h-1.4l-.2-.1-.9-.9v-.5c0-.8-.7-1.5-1.5-1.5s-1.5.7-1.5 1.5.7 1.5 1.5 1.5h.5l1.1 1v.1l1.9 6.7c.1.3.2.5.5.7l-3.5 2.5 1 1h16.2l-1-2h-13.1l2-1h9zm-.1-7h1v1h-1v-1zm0 2h1v1h-1v-1zm-10 2h1v1h-1v-1zm8-4h1v1h-1v-1zm0 2h1v1h-1v-1zm0 2h1v1h-1v-1zm-2-4h1v1h-1v-1zm0 2h1v1h-1v-1zm0 2h1v1h-1v-1zm-2-4h1v1h-1v-1zm0 2h1v1h-1v-1zm0 2h1v1h-1v-1zm-2-4h1v1h-1v-1zm0 2h1v1h-1v-1zm0 2h1v1h-1v-1zm-1-1h-1v-1h1v1zm0-2h-1v-1h1v1z' fill='%23787878'/%3E%3C/svg%3E");
    }
  }

  // Edit
  .toolbar-tab > .toolbar-icon-edit.toolbar-item {
    &, &:hover, &:active {
      color: var(--colorGinAppBackground);

      &:before {
        background-image: none;
        background-color: var(--colorGinAppBackground);
        mask-image: url("data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cg%3E%3Cpath fill='%23ffffff' d='M14.545 3.042l-1.586-1.585c-.389-.389-1.025-.389-1.414 0l-1.293 1.293 3 3 1.293-1.293c.389-.389.389-1.026 0-1.415z'/%3E%3Crect fill='%23ffffff' x='5.129' y='3.8' transform='matrix(-.707 -.707 .707 -.707 6.189 20.064)' width='4.243' height='9.899'/%3E%3Cpath fill='%23ffffff' d='M.908 14.775c-.087.262.055.397.316.312l2.001-.667-1.65-1.646-.667 2.001z'/%3E%3C/g%3E%3C/svg%3E%0A");
      }
    }
  }
}

#toolbar-bar.js-settings-tray-edit-mode button.toolbar-icon.toolbar-icon-edit.toolbar-item.is-active {
  color: var(--colorGinAppBackground);
}

// Inline Edit toggle
.toolbar-tab > .toolbar-icon.toolbar-icon-edit.toolbar-item,
.toolbar-tab > .toolbar-icon.toolbar-icon-edit.toolbar-item.is-active,
.toolbar-tab > .toolbar-icon.toolbar-icon-edit.toolbar-item:focus {
  background: var(--colorGinPrimary);
}

.toolbar-tray-horizontal a:focus,
.toolbar-box a:focus,
.toolbar .toolbar-icon.toolbar-handle:focus {
  background-color: var(--colorGinLayer2Background);
}

.toolbar .toolbar-icon.toolbar-handle::before,
.toolbar .toolbar-icon.toolbar-handle.open::before,
.toolbar .toolbar-menu .toolbar-menu .toolbar-icon.toolbar-handle::before,
.toolbar .toolbar-menu .toolbar-menu .toolbar-icon.toolbar-handle.open::before,
.toolbar-tray-horizontal ul li.menu-item--expanded ul li.menu-item--expanded,
.toolbar-tray-horizontal .toolbar-menu:not(:first-child) li.menu-item--expanded > a:focus {
  background-image: none;
}

.toolbar .toolbar-icon.toolbar-handle,
.toolbar .toolbar-icon.toolbar-handle.open,
.toolbar .toolbar-menu .toolbar-menu .toolbar-icon.toolbar-handle,
.toolbar .toolbar-menu .toolbar-menu .toolbar-icon.toolbar-handle.open,
.toolbar-tray-horizontal ul li.menu-item--expanded ul li.menu-item--expanded {
  &:before {
    content: "";
    display: block;
    position: absolute;
    right: 0;
    top: 18px;
    width: 16px;
    height: 16px;
    background-color: var(--colorGinPrimary);
    mask-image: url("data:image/svg+xml,%3Csvg width='9' height='14' viewBox='0 0 9 14' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M 1.7109375,0.31445312 0.2890625,1.7226562 5.5917969,7.0761719 0.2890625,12.429688 1.7109375,13.837891 8.4082031,7.0761719 Z' fill='%23004adc'/%3E%3C/svg%3E");
    mask-repeat: no-repeat;
    mask-position: center center;
    mask-size: 12px 12px;
  }
}

.toolbar-menu__trigger,
.menu-item-title,
.menu-item-sub-title {
  display: none !important;
}

.toolbar-tray-horizontal ul li.menu-item--expanded ul li.menu-item--expanded,
.toolbar-tray-horizontal .toolbar-menu:not(:first-child) li.menu-item--expanded > a:focus {
  position: relative;

  &:before {
    top: 12px;
    right: 12px;
  }
}

#toolbar-bar.js-settings-tray-edit-mode {
  background: var(--colorGinPrimary);
}

#toolbar-bar.js-settings-tray-edit-mode button.toolbar-icon.toolbar-icon-edit.toolbar-item.is-active:hover {
  background: var(--colorGinPrimaryHover);
}

.toolbar .level-2 > ul,
.gin--dark-mode .toolbar .toolbar-toggle-orientation {
  background-color: var(--colorGinLayer2Background);
}

.toolbar .level-3 > ul {
  background-color: var(--colorGinAppBackground);
}

// Offset sidebar
.gin--classic-toolbar .page-wrapper__node-edit-form .layout-region-node-secondary {
  padding-top: 39px;
}

.gin--classic-toolbar.toolbar-tray-open .page-wrapper__node-edit-form .layout-region-node-secondary {
  padding-top: 79px;
}
